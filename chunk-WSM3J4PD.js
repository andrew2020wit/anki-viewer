import{b as I}from"./chunk-FMCXJ7Z2.js";import{o as l}from"./chunk-GWILJIGV.js";import{D as c,F as s,I as m,L as f,j as a,k as p,t as o,ua as d,yb as h}from"./chunk-Q4LM43N5.js";var k=(i=>(i[i.Again=1]="Again",i[i.Hard=2]="Hard",i[i.Normal=3]="Normal",i[i.Easy=4]="Easy",i))(k||{});var u="http://127.0.0.1:8765";var w="ankiRequestText";var A={0:"new",1:"learning",2:"review",3:"relearning",9:"unknown"};var b=class n{transform(e){if(!e)return"";let r=e.lastIndexOf("$");if(r===-1)return e;let t=e.slice(r+1),i=e.slice(0,r);return t.trim()===i.trim()?t:e}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=d({name:"transcription",type:n,pure:!0})};function R(n){return n?n.replace("[sound:","").replace("]","").trim():""}var C=class n{constructor(e,r){this.http=e;this.info=r}ankiHost=localStorage.getItem(l.key)||u;getCardById(e){return this.http.post(this.ankiHost,{action:"cardsInfo",version:6,params:{cards:[e]}}).pipe(s(r=>{r?.error&&this.info.error("Anki findCards error")}),p(r=>r.result?.[0]))}findCards(e){return this.http.post(this.ankiHost,{action:"findCards",version:6,params:{query:e}}).pipe(o(r=>{throw this.info.error("There is error with anki-connection"),r}),s(r=>{r?.error&&this.info.error("Anki findCards error")}),c(r=>this.http.post(this.ankiHost,{action:"cardsInfo",version:6,params:{cards:r.result}}).pipe(s(t=>{t?.error&&this.info.error("Anki findCards error")}),p(t=>t.result))))}forgetCard(e){return e?this.http.post(this.ankiHost,{action:"forgetCards",version:6,params:{cards:[e]}}).pipe(o(r=>{throw this.info.error("There is error with anki-connection"),r})):a(!1)}answerCardsByIds(e,r){return e.length?this.http.post(this.ankiHost,{action:"answerCards",version:6,params:{answers:e.map(t=>({cardId:t,ease:r}))}}).pipe(o(t=>{throw this.info.error("There is error with anki-connection"),t})):a(!1)}static \u0275fac=function(r){return new(r||n)(f(h),f(I))};static \u0275prov=m({token:n,factory:n.\u0275fac,providedIn:"root"})};export{k as a,w as b,A as c,b as d,R as e,C as f};
