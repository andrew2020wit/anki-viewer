import{a as u}from"./chunk-P4LVASZ5.js";import{B as p,E as c,H as s,i as m,j as d,pa as h,q as a,sb as I,z as l}from"./chunk-42ZMIAHF.js";var v=(o=>(o[o.Again=1]="Again",o[o.Hard=2]="Hard",o[o.Normal=3]="Normal",o[o.Easy=4]="Easy",o))(v||{});var n="http://127.0.0.1:8765";var g="ankiRequestText";var x={0:"new",1:"learning",2:"review",3:"relearning",9:"unknown"};var b=class e{transform(r){if(!r)return"";let t=r.lastIndexOf("$");if(t===-1)return r;let i=r.slice(t+1),o=r.slice(0,t);return i.trim()===o.trim()?i:r}static \u0275fac=function(t){return new(t||e)};static \u0275pipe=h({name:"transcription",type:e,pure:!0})};var f=class e{constructor(r){this.snackBar=r}show(r){this.snackBar.open(r,"",{duration:1e3,verticalPosition:"top",panelClass:"info-snack"})}error(r){this.snackBar.open(r,"",{duration:3e3,verticalPosition:"top",panelClass:"error-snack"})}static \u0275fac=function(t){return new(t||e)(s(u))};static \u0275prov=c({token:e,factory:e.\u0275fac,providedIn:"root"})};var k=class e{constructor(r,t){this.http=r;this.info=t}getCardById(r){return this.http.post(n,{action:"cardsInfo",version:6,params:{cards:[r]}}).pipe(p(t=>{t?.error&&this.info.error("Anki findCards error")}),d(t=>t.result?.[0]))}findCards(r){return this.http.post(n,{action:"findCards",version:6,params:{query:r}}).pipe(a(t=>{throw this.info.error("There is error with anki-connection"),t}),p(t=>{t?.error&&this.info.error("Anki findCards error")}),l(t=>this.http.post(n,{action:"cardsInfo",version:6,params:{cards:t.result}}).pipe(p(i=>{i?.error&&this.info.error("Anki findCards error")}),d(i=>i.result))))}forgetCard(r){return r?this.http.post(n,{action:"forgetCards",version:6,params:{cards:[r]}}).pipe(a(t=>{throw this.info.error("There is error with anki-connection"),t})):m(!1)}answerCardsByIds(r,t){return r.length?this.http.post(n,{action:"answerCards",version:6,params:{answers:r.map(i=>({cardId:i,ease:t}))}}).pipe(a(i=>{throw this.info.error("There is error with anki-connection"),i})):m(!1)}static \u0275fac=function(t){return new(t||e)(s(I),s(f))};static \u0275prov=c({token:e,factory:e.\u0275fac,providedIn:"root"})};export{v as a,g as b,x as c,b as d,f as e,k as f};
