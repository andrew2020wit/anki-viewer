import{b as l}from"./chunk-FMCXJ7Z2.js";import{o as h}from"./chunk-GWILJIGV.js";import{D as c,F as s,I as d,L as f,j as a,k as p,t as o,ua as m,yb as I}from"./chunk-Q4LM43N5.js";var k=(n=>(n[n.Again=1]="Again",n[n.Hard=2]="Hard",n[n.Normal=3]="Normal",n[n.Easy=4]="Easy",n))(k||{});var u="http://127.0.0.1:8765";var w="ankiRequestText";var A={0:"new",1:"learning",2:"review",3:"relearning",9:"unknown"};var C=class t{transform(r){if(!r)return"";let e=r.lastIndexOf("$");if(e===-1)return r;let i=r.slice(e+1),n=r.slice(0,e);return i.trim()===n.trim()?i:r}static \u0275fac=function(e){return new(e||t)};static \u0275pipe=m({name:"transcription",type:t,pure:!0})};function R(t){return t?t.replace("[sound:","").replace("]","").trim():""}var S=(t,r)=>t.type!==r.type?t.type-r.type:t.due-r.due;var b=class t{constructor(r,e){this.http=r;this.info=e}ankiHost=localStorage.getItem(h.key)||u;getCardById(r){return this.http.post(this.ankiHost,{action:"cardsInfo",version:6,params:{cards:[r]}}).pipe(s(e=>{e?.error&&this.info.error("Anki findCards error")}),p(e=>e.result?.[0]))}findCards(r){return this.http.post(this.ankiHost,{action:"findCards",version:6,params:{query:r}}).pipe(o(e=>{throw this.info.error("There is error with anki-connection"),e}),s(e=>{e?.error&&this.info.error("Anki findCards error")}),c(e=>this.http.post(this.ankiHost,{action:"cardsInfo",version:6,params:{cards:e.result}}).pipe(s(i=>{i?.error&&this.info.error("Anki findCards error")}),p(i=>i.result))))}forgetCard(r){return r?this.http.post(this.ankiHost,{action:"forgetCards",version:6,params:{cards:[r]}}).pipe(o(e=>{throw this.info.error("There is error with anki-connection"),e})):a(!1)}answerCardsByIds(r,e){return r.length?this.http.post(this.ankiHost,{action:"answerCards",version:6,params:{answers:r.map(i=>({cardId:i,ease:e}))}}).pipe(o(i=>{throw this.info.error("There is error with anki-connection"),i})):a(!1)}static \u0275fac=function(e){return new(e||t)(f(I),f(l))};static \u0275prov=d({token:t,factory:t.\u0275fac,providedIn:"root"})};export{k as a,w as b,A as c,C as d,R as e,S as f,b as g};
