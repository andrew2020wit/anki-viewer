import{n as u}from"./chunk-SW2ZE6OU.js";import{B as m,E as a,H as n,i as d,j as l,pa as I,q as c,sb as h,z as f}from"./chunk-U47C5U2E.js";var v=(o=>(o[o.Again=1]="Again",o[o.Hard=2]="Hard",o[o.Normal=3]="Normal",o[o.Easy=4]="Easy",o))(v||{});var s="http://127.0.0.1:8765";var A="ankiRequestText";var x={0:"new",1:"learning",2:"review",3:"relearning"};var C=class e{transform(r){if(!r)return"";let t=r.lastIndexOf("$");if(t===-1)return r;let i=r.slice(t+1),o=r.slice(0,t);return i.trim()===o.trim()?i:r}static \u0275fac=function(t){return new(t||e)};static \u0275pipe=I({name:"transcription",type:e,pure:!0})};var p=class e{constructor(r){this.snackBar=r}show(r){this.snackBar.open(r,"",{duration:1e3,verticalPosition:"top",panelClass:"info-snack"})}error(r){this.snackBar.open(r,"",{duration:3e3,verticalPosition:"top",panelClass:"error-snack"})}static \u0275fac=function(t){return new(t||e)(n(u))};static \u0275prov=a({token:e,factory:e.\u0275fac,providedIn:"root"})};var k=class e{constructor(r,t){this.http=r;this.info=t}findCards(r){return this.http.post(s,{action:"findCards",version:6,params:{query:r}}).pipe(c(t=>{throw this.info.error("There is error with anki-connection"),t}),m(t=>{t?.error&&this.info.error("Anki findCards error")}),f(t=>this.http.post(s,{action:"cardsInfo",version:6,params:{cards:t.result}}).pipe(m(i=>{i?.error&&this.info.error("Anki findCards error")}),l(i=>i.result))))}answerCardsByIds(r,t){return r.length?this.http.post(s,{action:"forgetCards",version:6,params:{cards:r}}).pipe(c(i=>{throw this.info.error("There is error with anki-connection"),i}),f(()=>this.http.post(s,{action:"answerCards",version:6,params:{answers:r.map(i=>({cardId:i,ease:t}))}}))):d(!1)}static \u0275fac=function(t){return new(t||e)(n(h),n(p))};static \u0275prov=a({token:e,factory:e.\u0275fac,providedIn:"root"})};export{v as a,A as b,x as c,C as d,p as e,k as f};
