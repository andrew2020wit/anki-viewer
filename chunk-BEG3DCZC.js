import{b as l}from"./chunk-OFTAFKT7.js";import{D as m,F as p,I as d,L as c,j as a,k as f,t as s,ua as h,zb as I}from"./chunk-5H24RP25.js";var C=(i=>(i[i.Again=1]="Again",i[i.Hard=2]="Hard",i[i.Normal=3]="Normal",i[i.Easy=4]="Easy",i))(C||{});var o="http://127.0.0.1:8765";var v="ankiRequestText";var g={0:"new",1:"learning",2:"review",3:"relearning",9:"unknown"};var b=class n{transform(e){if(!e)return"";let r=e.lastIndexOf("$");if(r===-1)return e;let t=e.slice(r+1),i=e.slice(0,r);return t.trim()===i.trim()?t:e}static \u0275fac=function(r){return new(r||n)};static \u0275pipe=h({name:"transcription",type:n,pure:!0})};var u=class n{constructor(e,r){this.http=e;this.info=r}getCardById(e){return this.http.post(o,{action:"cardsInfo",version:6,params:{cards:[e]}}).pipe(p(r=>{r?.error&&this.info.error("Anki findCards error")}),f(r=>r.result?.[0]))}findCards(e){return this.http.post(o,{action:"findCards",version:6,params:{query:e}}).pipe(s(r=>{throw this.info.error("There is error with anki-connection"),r}),p(r=>{r?.error&&this.info.error("Anki findCards error")}),m(r=>this.http.post(o,{action:"cardsInfo",version:6,params:{cards:r.result}}).pipe(p(t=>{t?.error&&this.info.error("Anki findCards error")}),f(t=>t.result))))}forgetCard(e){return e?this.http.post(o,{action:"forgetCards",version:6,params:{cards:[e]}}).pipe(s(r=>{throw this.info.error("There is error with anki-connection"),r})):a(!1)}answerCardsByIds(e,r){return e.length?this.http.post(o,{action:"answerCards",version:6,params:{answers:e.map(t=>({cardId:t,ease:r}))}}).pipe(s(t=>{throw this.info.error("There is error with anki-connection"),t})):a(!1)}static \u0275fac=function(r){return new(r||n)(c(I),c(l))};static \u0275prov=d({token:n,factory:n.\u0275fac,providedIn:"root"})};export{C as a,v as b,g as c,b as d,u as e};
