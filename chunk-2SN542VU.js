import{a as u}from"./chunk-P4LVASZ5.js";import{B as a,E as p,H as o,i as d,j as f,pa as l,q as m,sb as h,z as I}from"./chunk-42ZMIAHF.js";var v=(n=>(n[n.Again=1]="Again",n[n.Hard=2]="Hard",n[n.Normal=3]="Normal",n[n.Easy=4]="Easy",n))(v||{});var s="http://127.0.0.1:8765";var A="ankiRequestText";var x={0:"new",1:"learning",2:"review",3:"relearning",9:"unknown"};var C=class e{transform(r){if(!r)return"";let t=r.lastIndexOf("$");if(t===-1)return r;let i=r.slice(t+1),n=r.slice(0,t);return i.trim()===n.trim()?i:r}static \u0275fac=function(t){return new(t||e)};static \u0275pipe=l({name:"transcription",type:e,pure:!0})};var c=class e{constructor(r){this.snackBar=r}show(r){this.snackBar.open(r,"",{duration:1e3,verticalPosition:"top",panelClass:"info-snack"})}error(r){this.snackBar.open(r,"",{duration:3e3,verticalPosition:"top",panelClass:"error-snack"})}static \u0275fac=function(t){return new(t||e)(o(u))};static \u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})};var k=class e{constructor(r,t){this.http=r;this.info=t}getCardById(r){return this.http.post(s,{action:"cardsInfo",version:6,params:{cards:[r]}}).pipe(a(t=>{t?.error&&this.info.error("Anki findCards error")}),f(t=>t.result?.[0]))}findCards(r){return this.http.post(s,{action:"findCards",version:6,params:{query:r}}).pipe(m(t=>{throw this.info.error("There is error with anki-connection"),t}),a(t=>{t?.error&&this.info.error("Anki findCards error")}),I(t=>this.http.post(s,{action:"cardsInfo",version:6,params:{cards:t.result}}).pipe(a(i=>{i?.error&&this.info.error("Anki findCards error")}),f(i=>i.result))))}answerCardsByIds(r,t){return r.length?this.http.post(s,{action:"answerCards",version:6,params:{answers:r.map(i=>({cardId:i,ease:t}))}}).pipe(m(i=>{throw this.info.error("There is error with anki-connection"),i})):d(!1)}static \u0275fac=function(t){return new(t||e)(o(h),o(c))};static \u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})};export{v as a,A as b,x as c,C as d,c as e,k as f};
