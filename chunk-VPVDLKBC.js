import{a as q}from"./chunk-BUG2RXMT.js";import{c as z,d as A,e as R,f as N}from"./chunk-IGZTXHTU.js";import"./chunk-SW2ZE6OU.js";import{Ca as o,Da as a,Ea as v,I as L,Ia as M,Sa as c,Ua as p,Y as b,ab as I,bb as E,da as C,ea as n,ia as y,ma as T,ra as h,s as P,u as O,va as x,wa as g,wb as H,ya as k}from"./chunk-U47C5U2E.js";function D(i,s){if(i&1&&(o(0,"span",12),c(1),a()),i&2){let e,t=M(3);n(),p(" ",(e=t.ankiCard())==null||e.fields==null||e.fields.phVerb==null?null:e.fields.phVerb.value," ")}}function K(i,s){if(i&1&&v(0,"span",13),i&2){let e,t=M(3);x("innerHTML",(e=t.ankiCard())==null||e.fields==null||e.fields.lexunit==null?null:e.fields.lexunit.value,C)}}function V(i,s){if(i&1&&(o(0,"div",10),h(1,D,2,1,"span",12)(2,K,1,1,"span",13),a()),i&2){let e,t,l=M(2);n(),k(!((e=l.ankiCard())==null||e.fields==null||e.fields.phVerb==null)&&e.fields.phVerb.value?1:-1),n(),k(!((t=l.ankiCard())==null||t.fields==null||t.fields.lexunit==null)&&t.fields.lexunit.value?2:-1)}}function j(i,s){if(i&1&&v(0,"div",18),i&2){let e,t=M(3);x("innerHTML",(e=t.ankiCard())==null||e.fields==null||e.fields.translation==null?null:e.fields.translation.value,C)}}function F(i,s){if(i&1&&(o(0,"div",14),v(1,"span",15),I(2,"transcription"),o(3,"span",16)(4,"span"),c(5),a(),o(6,"span"),c(7),a()()(),v(8,"div",17),h(9,j,1,1,"div",18),o(10,"div",19)(11,"span"),c(12),a(),o(13,"span"),c(14),a(),o(15,"span",20),c(16),a(),o(17,"span"),c(18),a()()),i&2){let e,t,l,m,f,u,_,r,S,w,d=M(2);n(),x("innerHTML",E(2,19,(e=d.ankiCard())==null||e.fields==null||e.fields.transcription==null?null:e.fields.transcription.value),C),n(4),p(" ",(t=d.ankiCard())==null||t.fields==null||t.fields.freq==null?null:t.fields.freq.value," "),n(2),p(" ",(l=d.ankiCard())==null||l.fields==null||l.fields.freq2==null?null:l.fields.freq2.value," "),n(),x("innerHTML",(m=d.ankiCard())==null||m.fields==null||m.fields.def==null?null:m.fields.def.value,C),n(),k(!((f=d.ankiCard())==null||f.fields==null||f.fields.translation==null)&&f.fields.translation.value?9:-1),n(),g("review",d.ankiCardTypes[((u=d.ankiCard())==null?null:u.type)||9]==="review"),n(),g("was-last",d.lastAnswer()===1),n(),p("",(_=d.ankiCard())==null||_.nextReviews==null?null:_.nextReviews[0]," "),n(),g("was-last",d.lastAnswer()===2),n(),p("",(r=d.ankiCard())==null||r.nextReviews==null?null:r.nextReviews[1]," "),n(),g("was-last",d.lastAnswer()===3),n(),p("",(S=d.ankiCard())==null||S.nextReviews==null?null:S.nextReviews[2]," "),n(),g("was-last",d.lastAnswer()===4),n(),p("",(w=d.ankiCard())==null||w.nextReviews==null?null:w.nextReviews[3]," ")}}function U(i,s){if(i&1&&(o(0,"div",0)(1,"div",4)(2,"span",5),c(3),a(),o(4,"span",6),c(5),a(),v(6,"span",7),o(7,"span",8),c(8),a(),v(9,"span",9),h(10,V,3,2,"div",10),a(),v(11,"div",11),h(12,F,19,21),a()),i&2){let e,t,l,m,f,u,_,r=M();n(3),p(" ",r.cardsNumber()," "),n(),g("review",r.ankiCardTypes[((e=r.ankiCard())==null?null:e.type)||9]==="review"),n(),p(" ",r.ankiCardTypes[((t=r.ankiCard())==null?null:t.type)||9]," : "),n(),x("innerHTML",(l=r.ankiCard())==null||l.fields==null||l.fields.term==null?null:l.fields.term.value,C),n(2),p(" (",(m=r.ankiCard())==null||m.fields==null||m.fields.pos==null?null:m.fields.pos.value,") "),n(),x("innerHTML",(f=r.ankiCard())==null||f.fields==null||f.fields.registerlab==null?null:f.fields.registerlab.value,C),n(),k(!((u=r.ankiCard())==null||u.fields==null||u.fields.phVerb==null)&&u.fields.phVerb.value||!((u=r.ankiCard())==null||u.fields==null||u.fields.lexunit==null)&&u.fields.lexunit.value?10:-1),n(),x("innerHTML",(_=r.ankiCard())==null||_.fields==null||_.fields.exampleText==null?null:_.fields.exampleText.value,C),n(),k(r.showBackSide()?12:-1)}}var B=class i{constructor(s,e){this.ankiConnectService=s;this.info=e}isLoading=b(!1);ankiCard=b(null);cardsNumber=b(0);showBackSide=b(!0);lastAnswer=b(0);ankiCardTypes=z;hotKeysService=L(q);hotKeysServiceSubscription;ngOnInit(){this.getCard(),this.takeHotKey()}ngOnDestroy(){this.hotKeysServiceSubscription?.unsubscribe()}getCard(){let s="deck:cald is:due";this.isLoading.set(!0),this.showBackSide.set(!1),this.ankiConnectService.findCards(s).pipe(P(1),O(()=>{this.isLoading.set(!1)})).subscribe(e=>{e.sort((t,l)=>t.due-l.due),this.ankiCard.set(e[0]||null),this.cardsNumber.set(e.length),window.scrollTo(0,0)})}takeHotKey(){this.hotKeysServiceSubscription=this.hotKeysService.hotKeyEvent.subscribe(s=>{switch(s){case" ":this.showBackSide.set(!0);break;case"1":this.answerCard(1);break;case"2":this.answerCard(2);break;case"3":this.answerCard(3);break;case"4":this.answerCard(4);break}})}answerCard(s){this.isLoading.set(!0);let e=this.ankiCard()?.cardId;e&&this.ankiConnectService.answerCardsByIds([e],s).pipe(P(1),O(()=>{this.isLoading.set(!1)})).subscribe(()=>{this.lastAnswer.set(s),this.getCard()})}static \u0275fac=function(e){return new(e||i)(y(N),y(R))};static \u0275cmp=T({type:i,selectors:[["app-learn"]],decls:8,vars:2,consts:[[1,"card"],[1,"settings"],["routerLink","/"],[1,"hints"],[1,"term-block"],[1,"cards-number"],[1,"card-type"],[1,"term",3,"innerHTML"],[1,"pos"],[1,"register-lab",3,"innerHTML"],[1,"lex-unit"],[1,"example",3,"innerHTML"],[1,"ph-verb"],[1,"lex-unit",3,"innerHTML"],[1,"term-extra"],[1,"transcription",3,"innerHTML"],[1,"freq"],[1,"definition",3,"innerHTML"],[1,"translation",3,"innerHTML"],[1,"next-reviews"],[1,"normal"]],template:function(e,t){if(e&1&&(h(0,U,13,10,"div",0),o(1,"div",1)(2,"a",2),c(3," Home "),a(),o(4,"span"),c(5),a(),o(6,"span",3),c(7," | Space - show extra, 1-again, 2-hard, 3-normal, 4-ease. "),a()()),e&2){let l;k(t.ankiCard()?0:-1),n(5),p(" Deck: ",(l=t.ankiCard())==null?null:l.deckName," ")}},dependencies:[H,A],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;margin:0 auto;max-width:800px;padding:24px;height:100%;box-sizing:border-box}.settings[_ngcontent-%COMP%]{align-items:center;display:flex;gap:8px;justify-content:start;margin-bottom:24px}.card[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column;align-items:center;justify-content:flex-start;gap:16px}.card[_ngcontent-%COMP%]   .term-block[_ngcontent-%COMP%]{display:flex;font-size:24px;gap:16px;align-items:baseline}.card[_ngcontent-%COMP%]   .term-block[_ngcontent-%COMP%]   .card-type[_ngcontent-%COMP%]{font-size:14px}.card[_ngcontent-%COMP%]   .term-block[_ngcontent-%COMP%]   .card-type.review[_ngcontent-%COMP%]{color:green}.card[_ngcontent-%COMP%]   .term-block[_ngcontent-%COMP%]   .term[_ngcontent-%COMP%]{color:#00f}.card[_ngcontent-%COMP%]   .term-block[_ngcontent-%COMP%]   .pos[_ngcontent-%COMP%]{color:green}.card[_ngcontent-%COMP%]   .transcription[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .freq[_ngcontent-%COMP%]{font-size:24px;color:#00f}.card[_ngcontent-%COMP%]   .freq[_ngcontent-%COMP%]{color:#8b0000}.card[_ngcontent-%COMP%]   .example[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .definition[_ngcontent-%COMP%], .card[_ngcontent-%COMP%]   .translation[_ngcontent-%COMP%]{font-size:24px}.card[_ngcontent-%COMP%]   .translation[_ngcontent-%COMP%]{color:green}.next-reviews[_ngcontent-%COMP%]{display:flex;gap:16px;font-size:24px;padding:4px 8px;border:1px solid gray}.next-reviews.review[_ngcontent-%COMP%]{border:1px solid darkred;outline:1px solid darkred}.next-reviews[_ngcontent-%COMP%]   .normal[_ngcontent-%COMP%]{color:green}.next-reviews[_ngcontent-%COMP%]   .was-last[_ngcontent-%COMP%]{text-decoration:underline}.ph-verb[_ngcontent-%COMP%]{color:#00008b}.lex-unit[_ngcontent-%COMP%]{color:#8b0000}.cards-number[_ngcontent-%COMP%]{color:#8b008b}"]})};export{B as LearnComponent};
